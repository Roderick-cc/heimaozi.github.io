<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Dobin | 世德</title>
  <icon>https://www.gravatar.com/avatar/679dfda83291fcb6eecd3432e70489dc</icon>
  <subtitle>Torch down,the flame is still upward.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://dobinspark.com/"/>
  <updated>2018-09-04T03:30:22.405Z</updated>
  <id>https://dobinspark.com/</id>
  
  <author>
    <name>Dobin</name>
    <email>dobinspark@163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Node note</title>
    <link href="https://dobinspark.com/2018/07/15/6.nodejs%E7%AC%94%E8%AE%B0/"/>
    <id>https://dobinspark.com/2018/07/15/6.nodejs笔记/</id>
    <published>2018-07-15T03:31:01.000Z</published>
    <updated>2018-09-04T03:30:22.405Z</updated>
    
    <content type="html"><![CDATA[<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><a id="more"></a><ul><li>增删改查</li><li>登陆</li><li>注册</li><li>头像<ul><li>服务端图片</li><li>水印</li><li>图片水印</li></ul></li><li>找回密码</li><li><p>密码修改</p></li><li><p>模块系统</p><ul><li>核心模块</li><li>第三方模块</li><li>自己写的模块载规则以及加载机制</li><li>循环加载</li></ul></li><li>npm</li><li>package.json</li><li>Express<ul><li>第三方 Web 开发框架</li><li>高度封装了 http 模块</li><li>更加专注于业务，而非底层细节</li><li>知其所以然</li></ul></li><li>增删改查<ul><li>使用文件来保存数据（锻炼异步编码）</li></ul></li><li>MongoDB<ul><li>（所有方法都封装好了）</li></ul></li></ul><ul><li><p>网站开发模型</p><ul><li>黑盒子、哑巴</li><li>写代码让它变得更智能</li><li>按照你设计好的套路供用户使用</li></ul></li><li><p>在 Node 中使用 art-template 模板引擎</p><ul><li>安装</li><li>加载</li><li>template.render()</li></ul></li><li>客户端渲染和服务端渲染的区别<ul><li>最少两次请求，发起 ajax 在客户端使用模板引擎渲染</li><li>客户端拿到的就是服务端已经渲染好的</li></ul></li><li>处理留言本案例首页数据列表渲染展示</li><li>处理留言本案例发表留言功能<ul><li>路径</li><li>设计好的请求路径</li><li>$GET 直接或查询字符串数据</li><li>Node 中需要咱们自己动手来解析<ul><li>url.parse()</li></ul></li><li>/pinglun?name=jack&amp;message=hello</li><li>split(‘?’)</li><li>name=jack&amp;message=hello</li><li>split(‘&amp;’)</li><li>name=jack message=hello</li><li>forEach()</li><li>name=jack.split(‘=’)</li><li>0 key</li><li>1 value</li></ul></li><li>掌握如何解析请求路径中的查询字符串<ul><li>url.parse()</li></ul></li><li>如何在 Node 中实现服务器重定向<ul><li>header(‘location’)<ul><li>301 永久重定向 浏览器会记住<ul><li>a.com b.com</li><li>a 浏览器不会请求 a 了</li><li>直接去跳到 b 了</li></ul></li><li>302 临时重定向 浏览器不记忆<ul><li>a.com b.com</li><li>a.com 还会请求 a</li><li>a 告诉浏览器你往 b</li></ul></li></ul></li></ul></li><li>Node 中的 Console（REPL）使用</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>jQuery 的 each 和 原生的 JavaScript 方法 forEach<ul><li>EcmaScript 5 提供的<ul><li>不兼容 IE 8</li></ul></li><li>jQuery 的 each 由 jQuery 这个第三方库提供<ul><li>jQuery 2 以下的版本是兼容 IE 8 的</li><li>它的 each 方法主要用来遍历 jQuery 实例对象（伪数组）</li><li>同时它也可以作为低版本浏览器中 forEach 替代品</li><li>jQuery 的实例对象不能使用 forEach 方法，如果想要使用必须转为数组才可以使用</li><li><code>[].slice.call(jQuery实例对象)</code></li></ul></li></ul></li><li>模块中导出多个成员和导出单个成员</li><li>301 和 302 状态码区别<ul><li>301 永久重定向，浏览器会记住</li><li>302 临时重定向</li></ul></li><li>exports 和 module.exports 的区别<ul><li>每个模块中都有一个 module 对象</li><li>module 对象中有一个 exports 对象</li><li>我们可以把需要导出的成员都挂载到 module.exports 接口对象中</li><li>也就是：<code>moudle.exports.xxx = xxx</code> 的方式</li><li>但是每次都 <code>moudle.exports.xxx = xxx</code> 很麻烦，点儿的太多了</li><li>所以 Node 为了你方便，同时在每一个模块中都提供了一个成员叫：<code>exports</code></li><li><code>exports === module.exports</code> 结果为  <code>true</code>s</li><li>所以对于：<code>moudle.exports.xxx = xxx</code> 的方式 完全可以：<code>expots.xxx = xxx</code></li><li>当一个模块需要导出单个成员的时候，这个时候必须使用：<code>module.exports = xxx</code> 的方式</li><li>不要使用 <code>exports = xxx</code> 不管用</li><li>因为每个模块最终向外 <code>return</code> 的是 <code>module.exports</code></li><li>而 <code>exports</code> 只是 <code>module.exports</code> 的一个引用</li><li>所以即便你为 <code>exports = xx</code> 重新赋值，也不会影响 <code>module.exports</code></li><li>但是有一种赋值方式比较特殊：<code>exports = module.exports</code> 这个用来重新建立引用关系的</li><li>之所以让大家明白这个道理，是希望可以更灵活的去用它</li></ul></li><li>Node 是一个比肩 Java、PHP 的一个平台<ul><li>JavaScript 既能写前端也能写服务端</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">moudle.exports = &#123;</span><br><span class="line">  a: <span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新建立 exports 和 module.exports 之间的引用关系</span></span><br><span class="line">exports = <span class="built_in">module</span>.exports</span><br><span class="line"></span><br><span class="line">exports.foo = <span class="string">'bar'</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.mySlice = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> start = <span class="number">0</span></span><br><span class="line">  <span class="keyword">var</span> end = <span class="keyword">this</span>.length</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">1</span>) &#123;</span><br><span class="line">    start = <span class="built_in">arguments</span>[<span class="number">0</span>]</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">2</span>) &#123;</span><br><span class="line">    start = <span class="built_in">arguments</span>[<span class="number">0</span>]</span><br><span class="line">    end = <span class="built_in">arguments</span>[<span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> tmp = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = start; i &lt; end; i++) &#123;</span><br><span class="line">    <span class="comment">// fakeArr[0]</span></span><br><span class="line">    <span class="comment">// fakeArr[1]</span></span><br><span class="line">    <span class="comment">// fakeArr[2]</span></span><br><span class="line">    tmp.push(<span class="keyword">this</span>[i])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> tmp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fakeArr = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="string">'abc'</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">'efg'</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">'haha'</span>,</span><br><span class="line">  length: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 所以你就得到了真正的数组。 </span></span><br><span class="line">[].mySlice.call(fakeArr)</span><br></pre></td></tr></table></figure><ul><li>jQuery 的 each 和 原生的 JavaScript 方法 forEach</li><li>301 和 302 的区别</li><li>模块中导出单个成员和导出多个成员的方式</li><li>module.exports 和 exports 的区别</li><li>require 方法加载规则<ul><li>优先从缓存加载</li><li>核心模块</li><li>路径形式的模块</li><li>第三方模块<ul><li>node_modules</li></ul></li></ul></li><li>package.json 包描述文件<ul><li>dependencies 选项的作用</li></ul></li><li>npm 常用命令</li><li><p>Express 基本使用</p></li><li><p>使用 Express 把之前的留言本案例自己动手改造一下</p></li></ul><p>通过淘宝镜像install page </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>设置此命令之后npn install 默认从淘宝的服务器download page</span><br><span class="line">npm config set registry https://registry.npm.taobao.org</span><br><span class="line"><span class="meta">#</span> 查看 npm 配置信息</span><br><span class="line">npm config list</span><br></pre></td></tr></table></figure><h2 id="7-Express"><a href="#7-Express" class="headerlink" title="7.Express"></a>7.Express</h2><h3 id="文件操作路径和模块路径"><a href="#文件操作路径和模块路径" class="headerlink" title="文件操作路径和模块路径"></a>文件操作路径和模块路径</h3><p> 文件操作中的相对路径可以省略<code>./</code>，在模块加载中，相对路径中的<code>./</code> 不能省略</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">在文件操作的相对路径中</span><br><span class="line">   ./data/a.txt 相对于当前目录</span><br><span class="line">   data/a.txt   相对于当前目录</span><br><span class="line">   /data/a.txt  绝对路径，当前文件模块所处磁盘根目录</span><br><span class="line">   c:/xx/xx...  绝对路径</span><br><span class="line">fs.readFile(&apos;./data/a.txt&apos;, function (err, data) &#123;</span><br><span class="line">  if (err) &#123;</span><br><span class="line">    console.log(err)</span><br><span class="line">    return console.log(&apos;读取失败&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(data.toString())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>模块操作路径</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 这里如果忽略了 . 则也是磁盘根目录</span><br><span class="line">require(&apos;/data/foo.js&apos;)</span><br><span class="line">//相对路径</span><br><span class="line">require(&apos;./data/foo.js&apos;)</span><br><span class="line">//模块加载的路径中的相对路径不能省略 ./</span><br></pre></td></tr></table></figure><h3 id="7-1-demo"><a href="#7-1-demo" class="headerlink" title="7.1 demo"></a>7.1 demo</h3><h4 id="7-1-1安装："><a href="#7-1-1安装：" class="headerlink" title="7.1.1安装："></a>7.1.1安装：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save express</span><br></pre></td></tr></table></figure><h4 id="7-1-2-Hello-world"><a href="#7-1-2-Hello-world" class="headerlink" title="7.1.2 Hello world"></a>7.1.2 Hello world</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const rxpress =require('express')</span><br><span class="line">const app = express()</span><br><span class="line"></span><br><span class="line">app.get('/',(req,res) =&gt; res.send('hello world'))</span><br><span class="line">app.listen(3000,()=&gt;consoel.log('Example app listening'))</span><br></pre></td></tr></table></figure><h4 id="7-1-3基本路由"><a href="#7-1-3基本路由" class="headerlink" title="7.1.3基本路由"></a>7.1.3基本路由</h4><p>get </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">  res.sed(<span class="string">'hello world'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>post:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.post(<span class="string">'/'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">  res.send(<span class="string">'got a post request'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="7-1-4静态服务-向外开放"><a href="#7-1-4静态服务-向外开放" class="headerlink" title="7.1.4静态服务-向外开放"></a>7.1.4静态服务-向外开放</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.<span class="keyword">static</span>(<span class="string">'public'</span>))</span><br><span class="line"> <span class="comment">//给public定义了别名</span></span><br><span class="line">app.use(<span class="string">'/static'</span>,express.<span class="keyword">static</span>(<span class="string">'public'</span>))</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">'/static'</span>,express.<span class="keyword">static</span>(path.join(__dirname,<span class="string">'public'</span>)))</span><br></pre></td></tr></table></figure><h3 id="7-2-Express"><a href="#7-2-Express" class="headerlink" title="7.2 Express"></a>7.2 Express</h3><h4 id="7-2-1-在Express中使用art-template模板引擎"><a href="#7-2-1-在Express中使用art-template模板引擎" class="headerlink" title="7.2.1 在Express中使用art-template模板引擎"></a>7.2.1 在Express中使用art-template模板引擎</h4><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install –save express</span><br><span class="line">npm install --save art-template</span><br><span class="line">npm install --save express-art-template</span><br></pre></td></tr></table></figure><p>配置：默认的是在views中查找后缀为art的文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.engine('art',require('express-art-template'))</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req , res</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//express 默认回去项目中的view目录中查找index.html</span></span><br><span class="line"> res.render(<span class="string">'index.html'</span>,&#123;</span><br><span class="line">   title：<span class="string">'hellow'</span></span><br><span class="line"> &#125;)</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>如果修改默认的<code>views</code>视图渲染存储目录，可以：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注意：第一个参数views千万不要写错</span></span><br><span class="line">app.set(<span class="string">'views'</span>,目录路径）</span><br></pre></td></tr></table></figure><h4 id="7-2-2获取post请求参数"><a href="#7-2-2获取post请求参数" class="headerlink" title="7.2.2获取post请求参数"></a>7.2.2获取post请求参数</h4><p>get请求数据是在URL通过传输的， req.query能够获取数据，而post请求方式数据是在from-date中，所以通过中间键middleware:</p><p>安装：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install body-parser</span><br></pre></td></tr></table></figure><p>配置：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// parse application/x-www-form-urlencoded</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// parse application/json</span></span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/plain'</span>)</span><br><span class="line">  res.write(<span class="string">'you posted:\n'</span>)</span><br><span class="line">  res.end(<span class="built_in">JSON</span>.stringify(req.body, <span class="literal">null</span>, <span class="number">2</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">  res.setHeader(<span class="string">'Content-type'</span>,<span class="string">'text/plain'</span>)</span><br><span class="line"> <span class="comment">//可以通过req.body 来获取表单POST请求体数据</span></span><br><span class="line">  res.end(<span class="built_in">JSON</span>.stringify(req.body,<span class="literal">null</span>,<span class="number">2</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="7-2-3-获取GET请求参数"><a href="#7-2-3-获取GET请求参数" class="headerlink" title="7.2.3 获取GET请求参数"></a>7.2.3 获取GET请求参数</h4><p>Express 内置了一个API，可以直接通过<code>req.query</code>获取</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.query</span><br></pre></td></tr></table></figure><h4 id="7-2-4-从文件中读取数据"><a href="#7-2-4-从文件中读取数据" class="headerlink" title="7.2.4 从文件中读取数据"></a>7.2.4 从文件中读取数据</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第二个参数为可选，把读取到的文件直接转换为设定的编码格式</span></span><br><span class="line">fs.readFile(<span class="string">'./date.json'</span>,<span class="string">'utf8'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,date</span>)</span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//读取的json文件是字符串类型,需要转换为对象，而对象内的属性是数组才能渲染</span></span><br><span class="line">res.render()</span><br></pre></td></tr></table></figure><h4 id="7-2-5-nodejs-案例"><a href="#7-2-5-nodejs-案例" class="headerlink" title="7.2.5 nodejs 案例"></a>7.2.5 nodejs 案例</h4><h5 id="1-起步"><a href="#1-起步" class="headerlink" title="1.起步"></a>1.起步</h5><h5 id="2-路由设计-–路由模块提取"><a href="#2-路由设计-–路由模块提取" class="headerlink" title="2.路由设计 –路由模块提取"></a>2.路由设计 –路由模块提取</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.router 请求另外一个页面</span></span><br><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(./<span class="built_in">require</span>)</span><br><span class="line"> route（app）</span><br><span class="line">/---&gt;另外的页面</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app</span>)</span>&#123;</span><br><span class="line">  app.get()</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Express提供了一种专门用来包装路由的方式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js router.js studuent.js</span></span><br><span class="line"><span class="comment">//---&gt;router.js</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="comment">// 1. 创建一个路由容器</span></span><br><span class="line"><span class="keyword">var</span> router = express.Router()</span><br><span class="line"><span class="comment">// 2. 把路由都挂载到 router 路由容器中</span></span><br><span class="line">router.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;&#125;)</span><br><span class="line">router.post(<span class="string">'/s'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;&#125;)</span><br><span class="line"><span class="comment">// 3. 把 router 导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = router</span><br><span class="line"></span><br><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="comment">//把路由容器挂载到app 服务中</span></span><br><span class="line">app.use(router)</span><br></pre></td></tr></table></figure><h5 id="3-提取路由模块"><a href="#3-提取路由模块" class="headerlink" title="3.提取路由模块"></a>3.提取路由模块</h5><h5 id="4-设计操作数据的API文件模块"><a href="#4-设计操作数据的API文件模块" class="headerlink" title="4.设计操作数据的API文件模块"></a>4.设计操作数据的API文件模块</h5><h4 id="7-2-5-封装异步的API"><a href="#7-2-5-封装异步的API" class="headerlink" title="7.2.5 封装异步的API"></a>7.2.5 封装异步的API</h4><p>JavaScript是单线程运行的，程序自上而下执行，单执行到比如定时器并不会执行定时器函数内的程序，而是将放到一边，将文件加载完成，再回到检查执行等待的函数。</p><p>如果需要获取一个函数中异步操作的结果，则必须通过回调函数来获取</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fu</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//异步eg1</span></span><br><span class="line"><span class="comment">//  var date ='默认数据'</span></span><br><span class="line"><span class="comment">//  setTimeout（function()&#123;</span></span><br><span class="line"><span class="comment">//    date = 'hello'</span></span><br><span class="line"><span class="comment">//  &#125;,1000）</span></span><br><span class="line"><span class="comment">//  return date </span></span><br><span class="line">  <span class="comment">//异步eg2</span></span><br><span class="line"><span class="comment">//  setTimeout（function()&#123;</span></span><br><span class="line"><span class="comment">//    date = 'hello'</span></span><br><span class="line">    <span class="keyword">return</span> date</span><br><span class="line"><span class="comment">//  &#125;,1000）</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br><span class="line">------------通过回调--------</span><br><span class="line">函数作为参数在另外一个函数中执行</span><br><span class="line">fn(<span class="function"><span class="keyword">function</span> (<span class="params">date</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="sublime自动化格式插件"><a href="#sublime自动化格式插件" class="headerlink" title="sublime自动化格式插件"></a>sublime自动化格式插件</h4><p>HTML-CSS-JS prettify</p><h3 id="修改完代码自动重启服务器"><a href="#修改完代码自动重启服务器" class="headerlink" title="修改完代码自动重启服务器"></a>修改完代码自动重启服务器</h3><p>使用第三方命名导航工具来解决频繁修改代码重启服务器：<code>nodemon</code></p><p><code>nodemon</code>是一基于Node.js开发的第一第三方命令行工具，我们使用的时候需要独立安装：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global nodemon</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node app.js</span><br><span class="line">#使用</span><br><span class="line">nodemon app.js</span><br></pre></td></tr></table></figure><p>只要通过nodemon app.js启动的服务，则它会监视你的文件变化，当文件发生改变的时候，会自动帮你重启服务器</p><h2 id="7-3-封装异步API"><a href="#7-3-封装异步API" class="headerlink" title="7.3 封装异步API"></a>7.3 封装异步API</h2><p>基于原生XMLHTTPRequest 封装get方法。ajax</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span> (<span class="params">url , callback</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">  <span class="comment">//当请求加载成功之后要调用指定的函数</span></span><br><span class="line">  oReq.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//现在需要的到这里的 oReq.responseText</span></span><br><span class="line">    callback(oReq.responseText)</span><br><span class="line">  &#125;</span><br><span class="line">  oReq.open(<span class="string">'get'</span>,url ,<span class="literal">true</span>)</span><br><span class="line">  oReq.send()</span><br><span class="line">&#125;</span><br><span class="line">get(<span class="string">'date.json'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">date</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(date)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="7-4-mongo-DB-数据库"><a href="#7-4-mongo-DB-数据库" class="headerlink" title="7.4 mongo DB 数据库"></a>7.4 mongo DB 数据库</h2><p>32位下载地址<a href="">www.mongodb.prg/dl/win32/i386</a></p><p>配置环境变量至bin目录</p><p>cmd 查看配置是否成功  <code>mongod --version</code></p><h3 id="启动和关闭MongoDB："><a href="#启动和关闭MongoDB：" class="headerlink" title="启动和关闭MongoDB："></a>启动和关闭MongoDB：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mongod 默认使用执行 mongo 命令所在盘符根目录下的 /date/db 作为自己的数据存储目录</span></span><br><span class="line"><span class="comment">//所以在第一次执行该命令之前先自己手动新建一个 /date/db file</span></span><br><span class="line">mongod</span><br><span class="line"></span><br><span class="line">结束DB进程</span><br><span class="line">ctrl+c</span><br></pre></td></tr></table></figure><p>如果想要想要修改默认的数据存储目录，可以：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath=数据存储目录路径</span><br></pre></td></tr></table></figure><p>链接数据库</p><p>打开新cmd 执行 mongo</p><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show dbs 查看显示所有数据库</span><br><span class="line">db   ---&gt;查看当前的操作的数据库</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">use 数据库名称</span><br><span class="line">切换到指定的数据库（没有则会新建）</span><br><span class="line">show collections  --&gt;显示当前操作的数据库的集合(如输出man1)</span><br><span class="line">db.man1.find()  --&gt;输出集合中的所有数据</span><br></pre></td></tr></table></figure><h3 id="在NOde中操作MongoDB"><a href="#在NOde中操作MongoDB" class="headerlink" title="在NOde中操作MongoDB"></a>在NOde中操作MongoDB</h3><p>使用第三方的<code>mongoose</code>包来操作</p><ul><li>官方<a href="mongoosejs.com">http://mongoosejs.com</a></li><li>官方指南：<a href="">http://mongoosejs.com/docs/guide.html</a></li><li>官方API： <a href="">http://mongoosejs.com/docs/spi.html</a></li></ul><p>install</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save mongoose</span><br></pre></td></tr></table></figure><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul><li>可以有多个数据库</li><li>一个数据库可以有多个集合（表）</li><li>一个集合中可以有多个文档</li><li>MongoDB非常灵活，不需要像MySQ 一样先创建数据库、表、设计表结构<ul><li>当你需要插入数据的时候，只需要指定往哪个数据库的哪个操作就行了</li><li>一切都有MongoDB来帮你自动完成建库建表</li></ul></li></ul><p>MongoDB 是动态的，非常灵活，只需要在代码中设计你的数据库就可以了</p><p>Mongoose 这个包就可以让你的设计编写的过程简单化</p><h3 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Schema = mongoose.Schema</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 连接数据库</span></span><br><span class="line"><span class="comment">// 指定连接的数据库不需要存在，当你插入第一条数据之后就会自动被创建出来</span></span><br><span class="line">mongoose.connect(<span class="string">'mongodb://localhost/itcast'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 设计文档结构（表结构）</span></span><br><span class="line"><span class="comment">// 字段名称就是表结构中的属性名称</span></span><br><span class="line"><span class="comment">// 约束的目的是为了保证数据的完整性，不要有脏数据</span></span><br><span class="line"><span class="keyword">var</span> userSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">  username: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    required: <span class="literal">true</span> <span class="comment">// 必须有</span></span><br><span class="line">  &#125;,</span><br><span class="line">  password: &#123;</span><br><span class="line">    type: <span class="built_in">String</span>,</span><br><span class="line">    required: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  email: &#123;</span><br><span class="line">    type: <span class="built_in">String</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 3. 将文档结构发布为模型</span></span><br><span class="line"><span class="comment">//    mongoose.model 方法就是用来将一个架构发布为 model</span></span><br><span class="line"><span class="comment">//    第一个参数：传入一个大写名词单数字符串用来表示你的数据库名称</span></span><br><span class="line"><span class="comment">//                 mongoose 会自动将大写名词的字符串生成 小写复数 的集合名称</span></span><br><span class="line"><span class="comment">//                 例如这里的 User 最终会变为 users 集合名称</span></span><br><span class="line"><span class="comment">//    第二个参数：架构 Schema</span></span><br><span class="line"><span class="comment">//   </span></span><br><span class="line"><span class="comment">//    返回值：模型构造函数</span></span><br><span class="line"><span class="keyword">var</span> User = mongoose.model(<span class="string">'User'</span>, userSchema)</span><br></pre></td></tr></table></figure><h3 id="增删查改"><a href="#增删查改" class="headerlink" title="增删查改"></a>增删查改</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4. 当我们有了模型构造函数之后，就可以使用这个构造函数对 users 集合中的数据为所欲为了（增删改查）</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #region /新增数据</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// var admin = new User(&#123;</span></span><br><span class="line"><span class="comment">//   username: 'zs',</span></span><br><span class="line"><span class="comment">//   password: '123456',</span></span><br><span class="line"><span class="comment">//   email: 'admin@admin.com'</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// admin.save(function (err, ret) &#123;</span></span><br><span class="line"><span class="comment">//   if (err) &#123;</span></span><br><span class="line"><span class="comment">//     console.log('保存失败')</span></span><br><span class="line"><span class="comment">//   &#125; else &#123;</span></span><br><span class="line"><span class="comment">//     console.log('保存成功')</span></span><br><span class="line"><span class="comment">//     console.log(ret)</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #endregion /新增数据</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #region /查询数据</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// User.find(function (err, ret) &#123;</span></span><br><span class="line"><span class="comment">//   if (err) &#123;</span></span><br><span class="line"><span class="comment">//     console.log('查询失败')</span></span><br><span class="line"><span class="comment">//   &#125; else &#123;</span></span><br><span class="line"><span class="comment">//     console.log(ret)</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">//得出的是一个数组</span></span><br><span class="line"><span class="comment">// User.find(&#123;</span></span><br><span class="line"><span class="comment">//   username: 'zs'</span></span><br><span class="line"><span class="comment">// &#125;, function (err, ret) &#123;</span></span><br><span class="line"><span class="comment">//   if (err) &#123;</span></span><br><span class="line"><span class="comment">//     console.log('查询失败')</span></span><br><span class="line"><span class="comment">//   &#125; else &#123;</span></span><br><span class="line"><span class="comment">//     console.log(ret)</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//得出的是一个对象</span></span><br><span class="line"><span class="comment">// User.findOne(&#123;</span></span><br><span class="line"><span class="comment">//   username: 'zs'</span></span><br><span class="line"><span class="comment">// &#125;, function (err, ret) &#123;</span></span><br><span class="line"><span class="comment">//   if (err) &#123;</span></span><br><span class="line"><span class="comment">//     console.log('查询失败')</span></span><br><span class="line"><span class="comment">//   &#125; else &#123;</span></span><br><span class="line"><span class="comment">//     console.log(ret)</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #endregion /查询数据</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #region /删除数据</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// User.remove(&#123;</span></span><br><span class="line"><span class="comment">//   username: 'zs'</span></span><br><span class="line"><span class="comment">// &#125;, function (err, ret) &#123;</span></span><br><span class="line"><span class="comment">//   if (err) &#123;</span></span><br><span class="line"><span class="comment">//     console.log('删除失败')</span></span><br><span class="line"><span class="comment">//   &#125; else &#123;</span></span><br><span class="line"><span class="comment">//     console.log('删除成功')</span></span><br><span class="line"><span class="comment">//     console.log(ret)</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #endregion /删除数据</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #region /更新数据</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// User.findByIdAndUpdate('5a001b23d219eb00c8581184', &#123;</span></span><br><span class="line"><span class="comment">//   password: '123'</span></span><br><span class="line"><span class="comment">// &#125;, function (err, ret) &#123;</span></span><br><span class="line"><span class="comment">//   if (err) &#123;</span></span><br><span class="line"><span class="comment">//     console.log('更新失败')</span></span><br><span class="line"><span class="comment">//   &#125; else &#123;</span></span><br><span class="line"><span class="comment">//     console.log('更新成功')</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">// **********************</span></span><br><span class="line"><span class="comment">// #endregion /更新数据</span></span><br><span class="line"><span class="comment">// **********************</span></span><br></pre></td></tr></table></figure><h2 id="7-5javascript-模块化"><a href="#7-5javascript-模块化" class="headerlink" title="7.5javascript 模块化"></a>7.5javascript 模块化</h2><p>Node 中的CommonJS</p><ul><li>浏览器中的<ul><li>AMD require.js</li><li>CMD sea.js</li></ul></li><li>ECMAScript 官方规定  ESC6 </li></ul><h2 id="7-6-Promise"><a href="#7-6-Promise" class="headerlink" title="7.6 Promise"></a>7.6 Promise</h2><p>异步编程</p><h3 id="callback-hell-回调地域"><a href="#callback-hell-回调地域" class="headerlink" title="callback hell  : 回调地域"></a>callback hell  : 回调地域</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./data/a.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="comment">// return console.log('读取失败')</span></span><br><span class="line">    <span class="comment">// 抛出异常</span></span><br><span class="line">    <span class="comment">//    1. 阻止程序的执行</span></span><br><span class="line">    <span class="comment">//    2. 把错误消息打印到控制台</span></span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">  fs.readFile(<span class="string">'./data/b.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="comment">// return console.log('读取失败')</span></span><br><span class="line">      <span class="comment">// 抛出异常</span></span><br><span class="line">      <span class="comment">//    1. 阻止程序的执行</span></span><br><span class="line">      <span class="comment">//    2. 把错误消息打印到控制台</span></span><br><span class="line">      <span class="keyword">throw</span> err</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    fs.readFile(<span class="string">'./data/c.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// return console.log('读取失败')</span></span><br><span class="line">        <span class="comment">// 抛出异常</span></span><br><span class="line">        <span class="comment">//    1. 阻止程序的执行</span></span><br><span class="line">        <span class="comment">//    2. 把错误消息打印到控制台</span></span><br><span class="line">        <span class="keyword">throw</span> err</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">输出是先输出a.txt --&gt;b.txt --&gt;c.txt</span><br><span class="line"></span><br><span class="line">同级则看谁内存少就先输出谁 异步过程</span><br></pre></td></tr></table></figure><p>为了解决以上编码方式带来的问题（回调地域嵌套），所以在ecmascript 6中新增了一个API <code>Promise</code></p><p>promise 本身不是异步，但是内部是异步，气三种状态</p><p>Pending     resolve  reject</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./data/a.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./data/b.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./data/c.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">----------------------------------------</span><br><span class="line">    </span><br><span class="line">p1</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="comment">// 当 p1 读取成功的时候</span></span><br><span class="line">    <span class="comment">// 当前函数中 return 的结果就可以在后面的 then 中 function 接收到</span></span><br><span class="line">    <span class="comment">// 当你 return 123 后面就接收到 123</span></span><br><span class="line">    <span class="comment">//      return 'hello' 后面就接收到 'hello'</span></span><br><span class="line">    <span class="comment">//      没有 return 后面收到的就是 undefined</span></span><br><span class="line">    <span class="comment">// 上面那些 return 的数据没什么卵用</span></span><br><span class="line">    <span class="comment">// 真正有用的是：我们可以 return 一个 Promise 对象</span></span><br><span class="line">    <span class="comment">// 当 return 一个 Promise 对象的时候，后续的 then 中的 方法的第一个参数会作为 p2 的 resolve</span></span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">    <span class="keyword">return</span> p2</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'读取文件失败了'</span>, err)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> p3</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'end'</span>)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h2 id="8-Node-中的其他成员"><a href="#8-Node-中的其他成员" class="headerlink" title="8.Node 中的其他成员"></a>8.Node 中的其他成员</h2><p>在每个模块中，除了<code>reqire</code> <code>exports</code> 等模块相关API之外，还有两个特殊的成员。</p><ul><li><code>__dirname</code>  <strong>动态获取</strong> 可以用来获取当前文件模块所属目录的绝对路径</li><li><code>__filename</code> <strong>动态获取</strong> 可以用来获取当前文件的绝对路径</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路径为：F:\！！！！所有课件\13nodejs\nodejs资料（7天）\06\code\indx.html</span></span><br><span class="line">__dirname 获取的是F:\！！！！所有课件\<span class="number">13</span>nodejs\nodejs资料（<span class="number">7</span>天）\<span class="number">06</span>\code</span><br><span class="line">__filename 获取的是：F:\！！！！所有课件\<span class="number">13</span>nodejs\nodejs资料（<span class="number">7</span>天）\<span class="number">06</span>\code\indx.html</span><br><span class="line">path.join(__dirname, <span class="string">'./public/'</span>)</span><br></pre></td></tr></table></figure><p>在文件操作中，仕勇相对路径是不可靠的，应为在Node中文件操作路径被设计为相对于执行node命令所处路径</p><h2 id="9-中间件"><a href="#9-中间件" class="headerlink" title="9. 中间件"></a>9. 中间件</h2><p>中间件的本质就是一个请求处理方法，我们把用户从请求到响应的整个过程分发到多个中间中去处理，目的是提高代码的灵活性，动态可扩展。</p><p>—————————<code>自来水厂处理水的过程</code>—————–</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;知识点&quot;&gt;&lt;a href=&quot;#知识点&quot; class=&quot;headerlink&quot; title=&quot;知识点&quot;&gt;&lt;/a&gt;知识点&lt;/h2&gt;
    
    </summary>
    
    
      <category term="node" scheme="https://dobinspark.com/tags/node/"/>
    
      <category term="note" scheme="https://dobinspark.com/tags/note/"/>
    
  </entry>
  
  <entry>
    <title>记录码字过程的小知识</title>
    <link href="https://dobinspark.com/2018/07/06/5.%E5%B0%8F%E7%9F%A5%E8%AF%86/"/>
    <id>https://dobinspark.com/2018/07/06/5.小知识/</id>
    <published>2018-07-06T03:31:01.000Z</published>
    <updated>2018-09-04T03:55:39.311Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>记录码字过程的小知识,持续更新</p></blockquote><a id="more"></a><h3 id="1-函数防抖"><a href="#1-函数防抖" class="headerlink" title="1.函数防抖"></a>1.函数防抖</h3><blockquote><p>​    lodash 是第三方JavaScript工具函数库</p></blockquote><p>原理：使用闭包，每次调用的时候把上一次的定时器清除</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">callback,time</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//清除定时器</span></span><br><span class="line">    <span class="built_in">window</span>.clearTimeout(timer)&#123;</span><br><span class="line">      timwe =<span class="built_in">window</span>.setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        callback()</span><br><span class="line">      &#125;,time)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;记录码字过程的小知识,持续更新&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="node" scheme="https://dobinspark.com/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>HTTP请求与服务器响应流程</title>
    <link href="https://dobinspark.com/2018/06/26/2.http/"/>
    <id>https://dobinspark.com/2018/06/26/2.http/</id>
    <published>2018-06-25T16:00:00.000Z</published>
    <updated>2018-06-26T11:01:41.094Z</updated>
    
    <content type="html"><![CDATA[<p>​    　<strong>1. HTTP 简介</strong></p><p>　　　　1.1定义</p><p>　　　　1.2 请求/响应报文格式</p><p>　　　　1.3请求方式–GET/POST     状态码</p><p>　　　　1.4 响应状态</p><p>　　<strong>2. HTTP请求，浏览器做了什么, 服务端处理解析过程</strong></p> <a id="more"></a><p>博客还未搭建七牛云，图片未能加载，请移步<a href="https://www.cnblogs.com/Dobin/p/9227955.html查看详情" target="_blank" rel="noopener">https://www.cnblogs.com/Dobin/p/9227955.html查看详情</a></p><h2 id="1：HTTP简介"><a href="#1：HTTP简介" class="headerlink" title="1：HTTP简介"></a><strong>1：HTTP简介</strong></h2><p><strong>　　1.1</strong></p><p>　　HTTP（HyperText Transfer Protocol，超文本传输协议）最早就是计算机与计算机之间沟通的一种标准协议，这 种协议限制了通讯内容的格式以及各项内容的含义。</p><p>　　随着时代的发展，技术的变迁，这种协议现在广泛的应用在各种领域，也不仅仅局限于计算机与计算机之间，手 机、电视等各种智能设备很多时候都在使用这种协议通讯，所以一般现在称 HTTP 为端与端之间的通讯协议。</p><p><img src="https://images2018.cnblogs.com/blog/1329093/201806/1329093-20180626134034868-391056346.png" alt="img"></p><p>　　Web 属于 B/S 架构的应用软件，在 B/S 架构中，浏览器与服务器沟通的协议就是 HTTP 协议，作为一个合格的 Web 开发者，了解 HTTP 协议中约定的内容是一门必修课。</p><p>　　应用软件架构一般分为两类： B/S 架构：Browser（浏览器） ←→ Server（服务器），这种软件都是通过浏览器访问一个网站使用， 服务器提供数据存储等服务。 C/S 架构：Client（客户端） ←→ Server（服务器），这种软件通过安装一个软件到电脑，然后使用， 服务器提供数据存储等服务。</p><p><strong>　　1.2请求报文的格式</strong></p><p><strong>　　</strong>请求行    —》请求方式 请求路径 HTTP协议版本  （一般GET请求主观上都是去‘拿东西’，所以使用需要看情况）</p><p>　　请求头    —》客户端想要告诉服务端的一些额外信息</p><p>　　空行</p><p>　　请求体   —》客户端想要发送给服务端的数据正文</p><p><strong>　　　　<img src="https://images2018.cnblogs.com/blog/1329093/201806/1329093-20180626140429906-620907297.png" alt="img"></strong></p><p>　　</p><p> 　　<strong>1.3请求的方式GET/POST    状态码</strong></p><p>　　根据HTTP标准，HTTP请求可以使用多种请求方法。</p><p>　　HTTP1.0定义了三种请求方法： GET, POST 和 HEAD方法。</p><p>　　HTTP1.1新增了五种请求方法：OPTIONS, PUT, DELETE, TRACE 和 CONNECT 方法。</p><p>具体的请查看官方文档：</p><p>　　<a href="http://www.runoob.com/http/http-methods.html" target="_blank" rel="noopener">http://www.runoob.com/http/http-methods.html</a></p><p>　　<a href="http://www.w3school.com.cn/tags/html_ref_httpmethods.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/tags/html_ref_httpmethods.asp</a></p><p> <img src="https://images2018.cnblogs.com/blog/1329093/201806/1329093-20180626140754773-869507871.png" alt="img"></p><p>　<strong>　　状态码：了解即可</strong></p><p>　　状态代码由三位数字组成，第一个数字定义了响应的类别，且有五种可能取值。</p><p>　　1xx：指示信息 —— 表示请求已接收，继续处理。</p><p>　　2xx：成功 —— 表示请求已被成功接收、理解、接受。</p><p>　　3xx：重定向 —— 要完成请求必须进行更进一步的操作。</p><p>　　4xx：客户端错误 —— 请求有语法错误或请求无法实现。</p><p>　　5xx：服务器端错误 —— 服务器未能实现合法的请求。</p><p>　<strong>　常见状态代码、状态描述的说明如下。</strong></p><p>　　200 OK：客户端请求成功。</p><p>　　400 Bad Request：客户端请求有语法错误，不能被服务器所理解。</p><p>　　401 Unauthorized：请求未经授权，这个状态代码必须和 WWW-Authenticate 报头域一起使用。</p><p>　　403 Forbidden：服务器收到请求，但是拒绝提供服务。</p><p>　　404 Not Found：请求资源不存在，举个例子：输入了错误的URL。</p><p>　　 500 Internal Server Error：服务器发生不可预期的错误。 503 Server Unavailable：服务器当前不能处理客户端的请求，一段时间后可能恢复正常。</p><h2 id="2-HTTP请求，浏览器做了什么-服务端处理解析过程"><a href="#2-HTTP请求，浏览器做了什么-服务端处理解析过程" class="headerlink" title="2. HTTP请求，浏览器做了什么, 服务端处理解析过程"></a><strong>2. HTTP请求，浏览器做了什么, 服务端处理解析过程</strong></h2><p>　　下面这张图我觉得比任何文字描述都清晰了，我这里就不再做详细介绍了，此图根据不同的操作系统，会有不同的概念，此为：Windows下的Apache+PHP环境。</p><p><img src="https://images2018.cnblogs.com/blog/1329093/201806/1329093-20180626094244912-1096955678.png" alt="img"></p><p>​     结语：以上过程仅是个人理解，或许有错误的地方，也或者有还未理解到的层面，如果看到有错误或者有所指点的还希望不吝赐教指正！抱拳，感谢！O(∩_∩)O哈哈</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;​    　&lt;strong&gt;1. HTTP 简介&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　　　1.1定义&lt;/p&gt;
&lt;p&gt;　　　　1.2 请求/响应报文格式&lt;/p&gt;
&lt;p&gt;　　　　1.3请求方式–GET/POST     状态码&lt;/p&gt;
&lt;p&gt;　　　　1.4 响应状态&lt;/p&gt;
&lt;p&gt;　　&lt;strong&gt;2. HTTP请求，浏览器做了什么, 服务端处理解析过程&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="HTTP" scheme="https://dobinspark.com/tags/HTTP/"/>
    
  </entry>
  
  <entry>
    <title>Test</title>
    <link href="https://dobinspark.com/2018/06/04/1.%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%AE%BE%E5%A4%87%E7%9A%84%E5%88%92%E5%88%86/"/>
    <id>https://dobinspark.com/2018/06/04/1.移动端设备的划分/</id>
    <published>2018-06-04T07:31:01.000Z</published>
    <updated>2018-08-18T06:12:38.770Z</updated>
    
    <content type="html"><![CDATA[<p>﻿### 1.移动端.</p><p>$1$.通过查询screen的宽度来指定某个宽度区间的网页布局    meat:vp</p><ul><li><p>超小屏幕（手机） 768px  以下</p><a id="more"></a></li><li><p>小屏 （pad）         768px-992px</p></li><li><p>中屏    （标屏）      992px-1200px</p></li><li><p>大屏（电脑）            1200px以上 </p></li><li><p>@media screen  and（min-width）{}</p><p>​</p><p>2.前端开发资源库 awesomes </p></li></ul><p>3.国内首个开源H5跨屏前端框架 Amaze UI</p><p>4.事件绑定： 主角  addEventListener(‘’,function(){})</p><p>主角,ontouch(function(){})</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  &lt;!--文档编码申明--&gt;</span><br><span class="line">   &lt;meta charset="utf-8"&gt;</span><br><span class="line">   &lt;!--要求当前网页使用浏览器最高版本的内核来渲染--&gt;</span><br><span class="line">&lt;!-- more --&gt;   &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;</span><br><span class="line">   &lt;!--视口的设置：视口的宽度和设备一致，默认的缩放比例和PC端一致，用户不能自行缩放--&gt;</span><br><span class="line">   &lt;meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0"&gt;</span><br><span class="line">   &lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ --&gt;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    &lt;link href="../lib/bootstrap/css/bootstrap.css" rel="stylesheet"&gt;</span><br><span class="line">    &lt;script src="../lib/html5shiv/html5shiv.min.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src="../lib/respond/respond.min.js"&gt;&lt;/script&gt;</span><br><span class="line">html5shiv 和  respond 分别用来解决IE8版本浏览器不支持 H5标签和媒体查询的  不兼容问题</span><br></pre></td></tr></table></figure><h3 id="2-栅格布局"><a href="#2-栅格布局" class="headerlink" title="2.栅格布局"></a>2.栅格布局</h3><p>​    1.栅格系统：其实就是行和列的布局，网格状布局</p><p>​    2.容器：container——默认会有15px左右的外边距 .row 填充父容器的15px的左右内间距   margin-left,margin-right -15px拉伸 可回充</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class="row"&gt;</span><br><span class="line">        &lt;!--列：col-*-*  *不确定（参数） --&gt;</span><br><span class="line">            col：列样式</span><br><span class="line">            第一个*：屏幕的大小</span><br><span class="line">            大屏设备     lg   大屏设备以上生效包含本身</span><br><span class="line">            中屏设备     md   中屏设备以上生效包含本身</span><br><span class="line">            小屏设备     sm   小屏设备以上生效包含本身</span><br><span class="line">            超小屏设备   xs   超小屏设备以上生效包含本身</span><br><span class="line">            第二个*：每一行的分等份，默认分成12等份 ，数字代表的是占多少份</span><br><span class="line">eg:  &lt;div class="col-lg-2 col-md-3 col-sm-4 col-xs-6"&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>​    3.显示与隐藏</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">visible-lg     大屏显示其他隐藏</span><br><span class="line">visible-md</span><br><span class="line">visible-sm</span><br><span class="line">visible-xs</span><br><span class="line">3.2版本以后  建议使用hidden</span><br><span class="line">hidden-lg</span><br><span class="line">hidden-md</span><br><span class="line">hidden-sm</span><br><span class="line">hidden-xs</span><br></pre></td></tr></table></figure><h3 id="3-选择器"><a href="#3-选择器" class="headerlink" title="3.选择器"></a>3.选择器</h3><ul><li>+.-选择器   </li><li>+紧邻的下一个兄弟元素 ~后面所有的兄弟元素</li></ul><h3 id="4-git搭建"><a href="#4-git搭建" class="headerlink" title="4.git搭建"></a>4.git搭建</h3><p>​    1.查看生成密钥对</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git config --global user.name "xxx"       ----用户名</span><br><span class="line"><span class="meta">$</span> git config --global user.email "xxx@xxx.com"  ---邮箱</span><br><span class="line">1.查看是否已经有了ssh密钥：cd ~/.ssh</span><br><span class="line">2.生成密钥 $ ssh-keygen -t rsa -C “xxx@xxx.com”    id_rsa.pub”-公钥</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> git init 初始化仓库，会在当前目录下创建一个,git隐藏的文件仓库</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> mkdir css 创建了为css 的文件夹</span><br><span class="line"><span class="meta">$</span> cd CSS 进入CSS文件夹内</span><br><span class="line"><span class="meta">$</span> cd ../ 返回上一级目录</span><br><span class="line"><span class="meta">$</span> touch index.html 创建文本</span><br><span class="line"><span class="meta">$</span> rm 移除文件夹</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> git add 表示当前文件夹(.)中所有文件加入到管理的缓存中（不是一次性加入到仓库中而是先加入到缓存区）</span><br><span class="line"><span class="meta">$</span> git status   查看状态</span><br><span class="line"><span class="meta">$</span> git commit -m '注释'  提交并增加注释</span><br><span class="line">---------------hexo-------------</span><br><span class="line">git init #git初始化</span><br><span class="line">git remote add origin https://github.com/用户名/你的GitHub用户名.github.io.git #添加仓库地址</span><br><span class="line">git checkout -b 分支名 #新建分支并切换到新建的分支</span><br><span class="line">git add . #添加所有本地文件到git</span><br><span class="line">git commit -m "这里填写你本次提交的备注，内容随意" #git提交</span><br><span class="line">git push origin 分支名 #文件推送到hexo分支 </span><br><span class="line">---------------clone-----------</span><br><span class="line">git clone -b 分支名 https://github.com/用户名/你的GitHub用户</span><br><span class="line">重新配置HEXO</span><br><span class="line">sudo npm install -g hexo-cli #安装hexo,注意这里不需要hexo初始化,否则之前的hexo配置参数会重置</span><br><span class="line">sudo npm install #安装依赖库</span><br><span class="line">sudo npm install hexo-deployer-git #安装git部署相关配置</span><br></pre></td></tr></table></figure><h3 id="5-boorstrap导航"><a href="#5-boorstrap导航" class="headerlink" title="5.boorstrap导航"></a>5.boorstrap导航</h3><h2 id="6-对象创建方式、for-in-循环遍历"><a href="#6-对象创建方式、for-in-循环遍历" class="headerlink" title="6.对象创建方式、for in 循环遍历"></a>6.对象创建方式、for in 循环遍历</h2><p>​     1.对象字面量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var o =&#123;</span><br><span class="line">  name:'s',</span><br><span class="line">  sex:true,</span><br><span class="line">  say:function()&#123;</span><br><span class="line">    console.log(this.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    2.new Object()创建对象</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var person=new Object()</span><br><span class="line">person.name ='s';</span><br><span class="line">person.age=30;</span><br><span class="line">person.sayHi=function()&#123;console('dasd')&#125;</span><br></pre></td></tr></table></figure><p>​    3.工厂函数</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function createPerson(name, age, job) &#123;</span><br><span class="line">  var person = new Object();</span><br><span class="line">  person.name = name;</span><br><span class="line">  person.age = age;</span><br><span class="line">  person.job = job;</span><br><span class="line">  person.sayHi = function()&#123;</span><br><span class="line">    console.log('Hello,everyBody');</span><br><span class="line">  &#125;</span><br><span class="line">  return person;</span><br><span class="line">&#125;</span><br><span class="line">var p1 = createPerson('张三', 22, 'actor');</span><br></pre></td></tr></table></figure><p>​    4.自定义构造函数</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function Person(name,age,job)&#123;</span><br><span class="line">  this.name = name;</span><br><span class="line">  this.age = age;</span><br><span class="line">  this.job = job;</span><br><span class="line">  this.sayHi = function()&#123;</span><br><span class="line">  console.log('Hello,everyBody');</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var p1 = new Person('张三', 22, 'actor');</span><br></pre></td></tr></table></figure><p>​    遍历对象的属性</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var obj=&#123;&#125;</span><br><span class="line">for(var i=0;i&lt;10;i++)&#123;</span><br><span class="line">  obj[i]=i*2; </span><br><span class="line">&#125;</span><br><span class="line">for(var key in obj)&#123;</span><br><span class="line">  console.log(key+'=='+obj[key])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-数组、字符串的常用方法"><a href="#7-数组、字符串的常用方法" class="headerlink" title="7.数组、字符串的常用方法"></a>7.数组、字符串的常用方法</h2><p>​    前言：push()、shift()、unshift()、reverse()、sort()、splice()、indexOf()</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//1 栈（stack）操作 先进后出</span><br><span class="line">1.push（） //添加元素到数组的末尾</span><br><span class="line">2.pop（）//删除数组末尾的元素</span><br><span class="line"></span><br><span class="line">3.shift() //删除数组最前面（头部）的元素</span><br><span class="line">4.unshift() //添加元素到数组的头部</span><br><span class="line"></span><br><span class="line">5.indexOf('')  //找出某个元素在数组中的索引从0开始</span><br><span class="line">6.splice(pos元素, 1索引) //过索引删除某个元素</span><br><span class="line">7.slice()复制一个数组</span><br><span class="line"></span><br><span class="line">// 3 排序方法</span><br><span class="line">reverse（） //翻转数组</span><br><span class="line">sort（）； //即使是数组sort也是根据字符，从小到大排序</span><br><span class="line">// 4 操作方法</span><br><span class="line">concat（） //把参数拼接到当前数组</span><br><span class="line">// 5 位置方法</span><br><span class="line">indexOf()、lastIndexOf()   //如果没找到返回-1</span><br><span class="line">// 6 迭代方法 不会修改原数组(可选)</span><br><span class="line">every()、filter()、forEach()、map()、some()</span><br><span class="line">// 7 方法将数组的所有元素连接到一个字符串中。</span><br><span class="line">join()</span><br></pre></td></tr></table></figure><p>​    字符串</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">charAt()    //获取指定位置处字符</span><br><span class="line">charCodeAt()  //获取指定位置处字符的ASCII码</span><br><span class="line">concat()   //拼接字符串，等效于+，+更常用</span><br><span class="line">slice()    //从start位置开始，截取到end位置，end取不到</span><br><span class="line">substring() //从start位置开始，截取到end位置，end取不到</span><br><span class="line">substr()   //从start位置开始，截取length个字符</span><br><span class="line">// 3 位置方法</span><br><span class="line">indexOf()   //返回指定内容在元字符串中的位置</span><br><span class="line">lastIndexOf() //从后往前找，只找第一个匹配的</span><br><span class="line">// 4 去除空白   </span><br><span class="line">trim()  //只能去除字符串前后的空白</span><br><span class="line">// 5 大小写转换方法</span><br><span class="line">to(Locale)UpperCase() //转换大写</span><br><span class="line">to(Locale)LowerCase() //转换小写</span><br></pre></td></tr></table></figure><p> innerHTML和innerText</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var box = document.getElementById('box');</span><br><span class="line">box.innerHTML = '我是文本&lt;p&gt;我会生成为标签&lt;/p&gt;';</span><br><span class="line">box.innerText = '我是文本&lt;p&gt;我不会生成为标签&lt;/p&gt;';</span><br></pre></td></tr></table></figure><h2 id="8-Dom自定义属性操作-getAttribute-…"><a href="#8-Dom自定义属性操作-getAttribute-…" class="headerlink" title="8.Dom自定义属性操作-getAttribute()…"></a>8.Dom自定义属性操作-getAttribute()…</h2><ul><li>getAttribute() 获取标签行内属性</li><li>setAttribute() 设置标签行内属性</li><li>removeAttribute() 移除标签行内属性</li><li>与element.属性的区别: 上述三个方法用于获取任意的行内属性。</li></ul><p>## </p><p>## </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;﻿### 1.移动端.&lt;/p&gt;
&lt;p&gt;$1$.通过查询screen的宽度来指定某个宽度区间的网页布局    meat:vp&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;超小屏幕（手机） 768px  以下&lt;/p&gt;
    
    </summary>
    
    
      <category term="case" scheme="https://dobinspark.com/tags/case/"/>
    
      <category term="mobile" scheme="https://dobinspark.com/tags/mobile/"/>
    
      <category term="Dom" scheme="https://dobinspark.com/tags/Dom/"/>
    
  </entry>
  
  <entry>
    <title>H5新增api and 数组操作</title>
    <link href="https://dobinspark.com/2018/06/04/3.H5%E6%96%B0%E5%A2%9EAPI%E5%92%8C%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/"/>
    <id>https://dobinspark.com/2018/06/04/3.H5新增API和数组操作/</id>
    <published>2018-06-04T01:43:01.000Z</published>
    <updated>2018-09-04T03:56:15.260Z</updated>
    
    <content type="html"><![CDATA[<h3 id="数组常用方法"><a href="#数组常用方法" class="headerlink" title="数组常用方法"></a>数组常用方法</h3><a id="more"></a><h5 id="1-获取元素"><a href="#1-获取元素" class="headerlink" title="1.获取元素"></a>1.获取元素</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementsByClassName (<span class="string">'class'</span>); </span><br><span class="line"><span class="comment">//通过类名获取元素，以伪数组形式存在。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'selector'</span>);</span><br><span class="line"><span class="comment">//通过CSS选择器获取元素，符合匹配条件的第1个元素。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">'selector'</span>); </span><br><span class="line"><span class="comment">//通过CSS选择器获取元素，以伪数组形式存在。</span></span><br></pre></td></tr></table></figure><h5 id="2-类名操作"><a href="#2-类名操作" class="headerlink" title="2.类名操作"></a>2.类名操作</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Node.classList.add(<span class="string">'class'</span>); </span><br><span class="line"><span class="comment">//添加class</span></span><br><span class="line"></span><br><span class="line">Node.classList.remove(<span class="string">'class'</span>); </span><br><span class="line"><span class="comment">//移除class</span></span><br><span class="line"></span><br><span class="line">Node.classList.toggle(<span class="string">'class'</span>); </span><br><span class="line"><span class="comment">//切换class，有则移除，无则添加</span></span><br><span class="line"></span><br><span class="line">Node.classList.contains(<span class="string">'class'</span>); </span><br><span class="line"><span class="comment">//检测是否存在class</span></span><br></pre></td></tr></table></figure><h5 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h5><blockquote><p>在HTML5中我们可以自定义属性，其格式如下data-*=””</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span> <span class="attr">data-my-name</span>=<span class="string">"itcast"</span> <span class="attr">data-age</span>=<span class="string">"10"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">/*</span></span><br><span class="line"><span class="undefined">  Node.dataset是以对象形式存在的，当我们为同一个DOM节点指定了多个自定义属性时，</span></span><br><span class="line"><span class="undefined">  Node.dataset则存储了所有的自定义属性的值。</span></span><br><span class="line"><span class="undefined">  */</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> demo = <span class="built_in">document</span>.querySelector(反馈);</span></span><br><span class="line"><span class="javascript"><span class="comment">//获取</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//注：当我们如下格式设置时，则需要以驼峰格式才能正确获取</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> name = demo.dataset[<span class="string">'myName'</span>];</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> age = demo.dataset[<span class="string">'age'</span>];</span></span><br><span class="line"><span class="javascript"><span class="comment">//设置</span></span></span><br><span class="line"><span class="javascript">demo.dataset[<span class="string">'name'</span>] = <span class="string">'web developer'</span>;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>/&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="H5-新增API"><a href="#H5-新增API" class="headerlink" title="H5-新增API"></a>H5-新增API</h3><h5 id="全屏方法"><a href="#全屏方法" class="headerlink" title="全屏方法"></a>全屏方法</h5><blockquote><p>HTML5规范允许用户自定义网页上任一元素全屏显示。</p></blockquote><ul><li>Node.requestFullScreen() 开启全屏显示</li><li>Node.cancelFullScreen() 关闭全屏显示</li><li>由于其兼容性原因，不同浏览器需要添加前缀如：<br>webkit内核浏览器：webkitRequestFullScreen、webkitCancelFullScreen，如chrome浏览器。<br>Gecko内核浏览器：mozRequestFullScreen、mozCancelFullScreen，如火狐浏览器。</li><li>document.fullScreen检测当前是否处于全屏<br>不同浏览器需要添加前缀<br>document.webkitIsFullScreen、document.mozFullScreen</li></ul><h5 id="多媒体"><a href="#多媒体" class="headerlink" title="多媒体"></a>多媒体</h5><blockquote><p>自定义播放器</p></blockquote><p>方法</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>addTextTrack()</td><td>向音频/视频添加新的文本轨道</td></tr><tr><td>canPlayType()</td><td>检测浏览器是否能播放指定的音频/视频类型</td></tr><tr><td>load()</td><td>重新加载音频/视频元素</td></tr><tr><td>play()</td><td>开始播放音频/视频</td></tr><tr><td>pause()</td><td>暂停当前播放的音频/视频</td></tr></tbody></table><p>属性</p><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>audioTracks</td><td>返回表示可用音轨的 AudioTrackList 对象</td></tr><tr><td>autoplay</td><td>设置或返回是否在加载完成后随即播放音频/视频</td></tr><tr><td>buffered</td><td>返回表示音频/视频已缓冲部分的 TimeRanges 对象</td></tr><tr><td>controller</td><td>返回表示音频/视频当前媒体控制器的 MediaController 对象</td></tr><tr><td>controls</td><td>设置或返回音频/视频是否显示控件（比如播放/暂停等）</td></tr><tr><td>crossOrigin</td><td>设置或返回音频/视频的 CORS 设置</td></tr><tr><td>currentSrc</td><td>返回当前音频/视频的 URL</td></tr><tr><td>currentTime</td><td>设置或返回音频/视频中的当前播放位置（以秒计）</td></tr><tr><td>defaultMuted</td><td>设置或返回音频/视频默认是否静音</td></tr><tr><td>defaultPlaybackRate</td><td>设置或返回音频/视频的默认播放速度</td></tr><tr><td>duration</td><td>返回当前音频/视频的长度（以秒计）</td></tr><tr><td>ended</td><td>返回音频/视频的播放是否已结束</td></tr><tr><td>error</td><td>返回表示音频/视频错误状态的 MediaError 对象</td></tr><tr><td>loop</td><td>设置或返回音频/视频是否应在结束时重新播放</td></tr><tr><td>mediaGroup</td><td>设置或返回音频/视频所属的组合（用于连接多个音频/视频元素）</td></tr><tr><td>muted</td><td>设置或返回音频/视频是否静音</td></tr><tr><td>networkState</td><td>返回音频/视频的当前网络状态</td></tr><tr><td>paused</td><td>设置或返回音频/视频是否暂停</td></tr><tr><td>playbackRate</td><td>设置或返回音频/视频播放的速度</td></tr><tr><td>played</td><td>返回表示音频/视频已播放部分的 TimeRanges 对象</td></tr><tr><td>preload</td><td>设置或返回音频/视频是否应该在页面加载后进行加载</td></tr><tr><td>readyState</td><td>返回音频/视频当前的就绪状态</td></tr><tr><td>seekable</td><td>返回表示音频/视频可寻址部分的 TimeRanges 对象</td></tr><tr><td>seeking</td><td>返回用户是否正在音频/视频中进行查找</td></tr><tr><td>src</td><td>设置或返回音频/视频元素的当前来源</td></tr><tr><td>startDate</td><td>返回表示当前时间偏移的 Date 对象</td></tr><tr><td>textTracks</td><td>返回表示可用文本轨道的 TextTrackList 对象</td></tr><tr><td>videoTracks</td><td>返回表示可用视频轨道的 VideoTrackList 对象</td></tr><tr><td>volume</td><td>设置或返回音频/视频的音量</td></tr></tbody></table><p>事件</p><table><thead><tr><th>事件</th><th>描述</th></tr></thead><tbody><tr><td>abort</td><td>当音频/视频的加载已放弃时</td></tr><tr><td>canplay</td><td>当浏览器可以播放音频/视频时</td></tr><tr><td>canplaythrough</td><td>当浏览器可在不因缓冲而停顿的情况下进行播放时</td></tr><tr><td>durationchange</td><td>当音频/视频的时长已更改时</td></tr><tr><td>emptied</td><td>当目前的播放列表为空时</td></tr><tr><td>ended</td><td>当目前的播放列表已结束时</td></tr><tr><td>error</td><td>当在音频/视频加载期间发生错误时</td></tr><tr><td>loadeddata</td><td>当浏览器已加载音频/视频的当前帧时</td></tr><tr><td>loadedmetadata</td><td>当浏览器已加载音频/视频的元数据时</td></tr><tr><td>loadstart</td><td>当浏览器开始查找音频/视频时</td></tr><tr><td>pause</td><td>当音频/视频已暂停时</td></tr><tr><td>play</td><td>当音频/视频已开始或不再暂停时</td></tr><tr><td>playing</td><td>当音频/视频在已因缓冲而暂停或停止后已就绪时</td></tr><tr><td>progress</td><td>当浏览器正在下载音频/视频时</td></tr><tr><td>ratechange</td><td>当音频/视频的播放速度已更改时</td></tr><tr><td>seeked</td><td>当用户已移动/跳跃到音频/视频中的新位置时</td></tr><tr><td>seeking</td><td>当用户开始移动/跳跃到音频/视频中的新位置时</td></tr><tr><td>stalled</td><td>当浏览器尝试获取媒体数据，但数据不可用时</td></tr><tr><td>suspend</td><td>当浏览器刻意不获取媒体数据时</td></tr><tr><td>timeupdate</td><td>当目前的播放位置已更改时</td></tr><tr><td>volumechange</td><td>当音量已更改时</td></tr><tr><td>waiting</td><td>当视频由于需要缓冲下一帧而停止</td></tr></tbody></table><h5 id="地理定位"><a href="#地理定位" class="headerlink" title="地理定位"></a>地理定位</h5><blockquote><p>在HTML规范中，增加了获取用户地理信息的API，<br>这样使得我们可以基于用户位置开发互联网应用，<br>即基于位置服务 (Location Base Service)</p></blockquote><ul><li>获取当前地理信息</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigator.geolocation.getCurrentPosition(successCallback, errorCallback)</span><br></pre></td></tr></table></figure><ul><li>重复获取当前地理信息</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigator. geolocation.watchPosition(successCallback, errorCallback)</span><br></pre></td></tr></table></figure><ul><li>当成功获取地理信息后，会调用succssCallback，并返回一个包含位置信息的对象position。<br>position.coords.latitude纬度<br>position.coords.longitude经度<br>position.coords.accuracy精度<br>position.coords.altitude海拔高度</li><li>当获取地理信息失败后，会调用errorCallback，并返回错误信息error</li><li>在现实开发中，通过调用第三方API（如百度地图）来实现地理定位信息，这些API都是基于用户当前位置的，并将用位置位置（经/纬度）当做参数传递，就可以实现相应的功能。</li></ul><h5 id="本地存储"><a href="#本地存储" class="headerlink" title="本地存储"></a>本地存储</h5><blockquote><p>随着互联网的快速发展，基于网页的应用越来越普遍，<br>同时也变的越来越复杂，为了满足各种各样的需求，会经常性在本地存储大量的数据，<br>HTML5规范提出了相关解决方案。</p></blockquote><ul><li>特性<ul><li>设置、读取方便</li><li>容量较大，sessionStorage约5M、</li><li>localStorage约20M</li><li>只能存储字符串，可以将对象JSON.stringify() 编码后存储</li></ul></li><li>window.sessionStorage<ul><li>生命周期为关闭浏览器窗口</li><li>在同一个窗口(页面)下数据可以共享</li></ul></li><li>window.localStorage<ul><li>永久生效，除非手动删除（服务器方式访问然后清除缓存）</li><li>可以多窗口（页面）共享</li></ul></li><li>方法<ul><li>setItem(key, value) 设置存储内容</li><li>getItem(key) 读取存储内容</li><li>removeItem(key) 删除键值为key的存储内容</li><li>clear() 清空所有存储内容</li></ul></li></ul><h5 id="历史管理"><a href="#历史管理" class="headerlink" title="历史管理"></a>历史管理</h5><blockquote><p>提供window.history，对象我们可以管理历史记录，<br>可用于单页面应用，Single Page Application，可以无刷新改变网页内容。</p></blockquote><ul><li><p>pushState(data, title, url) 追加一条历史记录  </p><ul><li><p>data用于存储自定义数据，通常设为null</p><ul><li>title网页标题，基本上没有被支持，一般设为空</li></ul><p>​+ url 以当前域为基础增加一条历史记录，不可跨域设置</p></li></ul></li><li><p>replaceState(data, title, url) 与pushState()基本相同，<br>不同之处在于replaceState()，只是替换当前url，不会增加/减少历史记录。</p></li><li><p>onpopstate事件，当前进或后退时则触发  </p></li></ul><h5 id="离线应用"><a href="#离线应用" class="headerlink" title="离线应用"></a>离线应用</h5><blockquote><p>HTML5中我们可以轻松的构建一个离线（无网络状态）应用，只需要创建一个cache manifest文件。</p></blockquote><ul><li>优势<ul><li>1、可配置需要缓存的资源</li><li>2、网络无连接应用仍可用</li><li>3、本地读取缓存资源，提升访问速度，增强用户体验</li><li>4、减少请求，缓解服务器负担</li></ul></li><li>缓存清单<ul><li>一个普通文本文件，其中列出了浏览器应缓存以供离线访问的资源，推荐使用.appcache为后缀名</li><li>例如我们创建了一个名为demo.appcache的文件，然后在需要应用缓存在页面的根元素(html)添加属性manifest=”demo.appcache”，路径要保证正确。</li></ul></li><li>manifest文件格式<ul><li>1、顶行写CACHE MANIFEST</li><li>2、CACHE: 换行 指定我们需要缓存的静态资源，如.css、image、js等</li><li>3、NETWORK: 换行 指定需要在线访问的资源，可使用通配符</li><li>4、FALLBACK: 换行 当被缓存的文件找不到时的备用资源</li></ul></li><li>其它<ul><li>1、CACHE: 可以省略，这种情况下将需要缓存的资源写在CACHE MANIFEST</li><li>2、可以指定多个CACHE: NETWORK: FALLBACK:，无顺序限制</li><li>3、#表示注释，只有当demo.appcache文件内容发生改变时或者手动清除缓存后，才会重新缓存。</li><li>4、chrome 可以通过chrome://appcache-internals/工具和离线（offline）模式来调试管理应用缓存</li></ul></li></ul><h5 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h5><blockquote><p>HTML5新增内建对象，可以读取本地文件内容。</p><p>在HTML表单中，可以上传文件的唯一控件就是<code>&lt;input type=&quot;file&quot;&gt;</code>。</p><p><em>注意</em>：当一个表单包含<code>&lt;input type=&quot;file&quot;&gt;</code>时，表单的<code>enctype</code>必须指定为<code>multipart/form-data</code>，<code>method</code>必须指定为<code>post</code>，浏览器才能正确编码并以<code>multipart/form-data</code>格式发送表单的数据。</p><p>出于安全考虑，浏览器只允许用户点击<code>&lt;input type=&quot;file&quot;&gt;</code>来选择本地文件，用JavaScript对<code>&lt;input type=&quot;file&quot;&gt;</code>的value`赋值是没有任何效果的。当用户选择了上传某个文件后，JavaScript也无法获得该文件的真实路径</p></blockquote><p>HTML5的File API提供了<code>File</code>和<code>FileReader</code>两个主要对象，可以获得文件信息并读取文件。</p><p>案例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;file&quot; class=&quot;file&quot; multiple&gt;</span><br><span class="line">&lt;img src=&quot;&quot; alt=&quot;&quot; id=&quot;img&quot;&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">/*获取到了文件表单元素*/</span><br><span class="line">var file = document.querySelector(&apos;.file&apos;);</span><br><span class="line">/*选择文件后触发*/</span><br><span class="line">file.onchange = function () &#123;</span><br><span class="line">/*初始化了一个文件读取对象*/</span><br><span class="line">var reader = new FileReader();</span><br><span class="line">/*读取文件数据  this.files[0] 文件表单元素选择的第一个文件 */</span><br><span class="line">reader.readAsDataURL(this.files[0]);</span><br><span class="line">/*读取的过程就相当于 加载过程 */</span><br><span class="line">/*读取完毕  预览 */</span><br><span class="line">reader.onload = function () &#123;</span><br><span class="line">    /*读取完毕 base64位数据  表示图片*/</span><br><span class="line">    console.log(this.result);</span><br><span class="line">document.querySelector(&apos;#img&apos;).src = this.result;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>上面的代码演示了如何通过H5的file API读取文件内容。DateURL的形式读取到的问见是一个字符串，类似</p><p><code>data:image/png;base64,iVBORw0KGgoAAAA</code>，常，用于设置图像。如果需要服务器端处理，把字符串base64,后面的字符发送给服务器并用Base64解码就可以得到原始文件的二进制内容。</p><p>JavaScript的一个重要特性就是单线程执行模式，关于H5 文件操作这里还有一个说明是廖雪峰写的关于异步实现的文件操作，有兴趣的可以看一下</p><p><a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/00143449993875172bbfac4b9764e2d9e2b5a17c706b3db000" target="_blank" rel="noopener"></a></p><h5 id="拖拽"><a href="#拖拽" class="headerlink" title="拖拽"></a>拖拽</h5><p>事件</p><p>box.addEventListener(‘drag’, function (e) {});</p><table><thead><tr><th>drag</th><th>整个拖拽执行</th></tr></thead><tbody><tr><td>dragleave</td><td>拖拽离开</td></tr><tr><td>dragstart</td><td>拖拽开始</td></tr><tr><td>dragend</td><td>拖拽结束</td></tr><tr><td>dragover</td><td>拖拽智商</td></tr><tr><td>drop</td><td>拖拽松开</td></tr></tbody></table><h5 id="网络状态"><a href="#网络状态" class="headerlink" title="网络状态"></a>网络状态</h5><ul><li>我们可以通过window.onLine来检测，用户当前的网络状况，返回一个布尔值<ul><li>window.online用户网络连接时被调用</li><li>window.offline用户网络断开时被调用</li></ul></li></ul><h2 id="一-数组的常用方法-—-gt-Array-对象属性"><a href="#一-数组的常用方法-—-gt-Array-对象属性" class="headerlink" title="一 数组的常用方法 —&gt;Array 对象属性"></a>一 数组的常用方法 —&gt;Array 对象属性</h2><h3 id="1-数组创建"><a href="#1-数组创建" class="headerlink" title="1.数组创建"></a>1.数组创建</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>();　<span class="comment">//创建一个数组</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>([size]);　<span class="comment">//创建一个数组并指定长度</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(arg1,arg2);　<span class="comment">//创建一个数组并赋值</span></span><br></pre></td></tr></table></figure><h3 id="2-数组元素的删除"><a href="#2-数组元素的删除" class="headerlink" title="2. 数组元素的删除"></a>2. 数组元素的删除</h3><!-- more--><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.shift(); <span class="comment">//移除最前一个元素并返回该元素值，数组中元素自动前移</span></span><br><span class="line">arr.pop(); <span class="comment">//移除最后一个元素并返回该元素值</span></span><br><span class="line">arr.splice(arg1,arg2); <span class="comment">//指定位置删除指定数量的元素  arg1为指定位置   arg2为指定数量</span></span><br></pre></td></tr></table></figure><h3 id="3-数组元素的添加"><a href="#3-数组元素的添加" class="headerlink" title="3. 数组元素的添加"></a>3. 数组元素的添加</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array. push();<span class="comment">// 将一个或多个新元素添加到数组结尾，并返回数组新长度</span></span><br><span class="line">array.unshift();<span class="comment">// 将一个或多个新元素添加到数组开头，并返回数组新长度</span></span><br></pre></td></tr></table></figure><h3 id="4-数组的截取和合并"><a href="#4-数组的截取和合并" class="headerlink" title="4. 数组的截取和合并"></a>4. 数组的截取和合并</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array.slice(start, end); <span class="comment">//提取字符串的某个部分，并以新的字符串返回被提取的部分。</span></span><br><span class="line">array.concat(arrayX,arrayX,......,arrayX); <span class="comment">//用于连接两个或多个数组,不会改变现有的数组，而仅仅会返回被连接数组的一个副本</span></span><br></pre></td></tr></table></figure><h3 id="5-数组的复制"><a href="#5-数组的复制" class="headerlink" title="5.数组的复制"></a>5.数组的复制</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以下是对第四点的衍生获取源数组</span></span><br><span class="line">array.slice(<span class="number">0</span>);  <span class="comment">//第一个参数为0，第二个参数不写，即默认为从start开始提取至数组结尾</span></span><br><span class="line">array.concat();</span><br></pre></td></tr></table></figure><h3 id="6-数组排序"><a href="#6-数组排序" class="headerlink" title="6.数组排序"></a>6.数组排序</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array.reverse() <span class="comment">//方法用于颠倒数组中元素的顺序。</span></span><br><span class="line">array.sort() <span class="comment">///方法用于对数组的元素进行排序。排序顺序可以是字母或数字，并按升序或降序。默认排序顺序为按字母升序。注意：当数字是按字母顺序排列时"40"将排在"5"前面。使用数字排序，你必须通过一个函数作为参数来调用。函数指定数字是按照升序还是降序排列。通过本页底部实例进一步了解它。</span></span><br><span class="line"><span class="keyword">var</span> points = [<span class="number">40</span>,<span class="number">100</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">25</span>,<span class="number">10</span>];</span><br><span class="line">points.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;<span class="keyword">return</span> a-b&#125;);</span><br><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line">[<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">25</span>,<span class="number">40</span>,<span class="number">100</span>]</span><br></pre></td></tr></table></figure><h3 id="7-数组中的所有元素转换为一个字符串"><a href="#7-数组中的所有元素转换为一个字符串" class="headerlink" title="7.数组中的所有元素转换为一个字符串"></a>7.数组中的所有元素转换为一个字符串</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">array.join([separator]) <span class="comment">//方法用于把数组中的所有元素转换一个字符串。元素可以通过指定的分隔符进行分隔的。</span></span><br><span class="line">eg:<span class="keyword">var</span> fruits = [<span class="string">"Banana"</span>, <span class="string">"Orange"</span>, <span class="string">"Apple"</span>, <span class="string">"Mango"</span>];</span><br><span class="line"><span class="keyword">var</span> energy = fruits.join();</span><br><span class="line">输出结果：</span><br><span class="line">Banana,Orange,Apple,Mango</span><br></pre></td></tr></table></figure><h3 id="8-返回指定值在数组中的位置"><a href="#8-返回指定值在数组中的位置" class="headerlink" title="8. 返回指定值在数组中的位置"></a>8. 返回指定值在数组中的位置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">'x'</span>, <span class="string">'5'</span>];</span><br><span class="line">array.indexOf(<span class="number">1</span>); <span class="comment">// 元素1的索引为0</span></span><br><span class="line">array.indexOf(<span class="number">10</span>); <span class="comment">// 元素10没有找到，返回-1</span></span><br><span class="line">array.indexOf(<span class="string">'x'</span>); <span class="comment">// 元素'30'的索引为2</span></span><br></pre></td></tr></table></figure><h2 id="二-数组迭代过程"><a href="#二-数组迭代过程" class="headerlink" title="二 数组迭代过程"></a>二 数组迭代过程</h2><h3 id="1-filter"><a href="#1-filter" class="headerlink" title="1.filter()"></a>1.filter()</h3><p>filter() 方法创建一个新的数组，新数组中的元素是通过检查指定数组中符合条件的所有元素。</p><p><strong>注意：</strong> filter() 不会对空数组进行检测。filter() 不会改变原始数组。</p><p>语法：array.filter(function(currentValue,index,arr), thisValue)</p><table><thead><tr><th>function(currentValue, index,arr)</th><th>必须。函数，数组中的每个元素都会执行这个函数函数参数</th></tr></thead><tbody><tr><td><em>thisValue</em></td><td>可选。对象作为该执行回调时使用，传递给函数，用作 “this” 的值。如果省略了 thisValue ，”this” 的值为 “undefined”</td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">例子：</span><br><span class="line"><span class="keyword">var</span> ages = [<span class="number">32</span>, <span class="number">33</span>, <span class="number">16</span>, <span class="number">40</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkAdult</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"demo"</span>).innerHTML = ages.filter(checkAdult);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出结果为:</span><br><span class="line"><span class="number">32</span>,<span class="number">33</span>,<span class="number">40</span></span><br></pre></td></tr></table></figure><h3 id="2-find"><a href="#2-find" class="headerlink" title="2.find()"></a>2.find()</h3><p>find() 返回符合测试条件的第一个数组元素值，如果没有符合条件的则返回 undefined。</p><p>find() 方法为数组中的每个元素都调用一次函数执行：</p><ul><li>当数组中的元素在测试条件时返回 <em>true</em> 时, find() 返回符合条件的元素，之后的值不会再调用执行函数。</li><li>如果没有符合条件的元素返回 undefined</li></ul><p>语法：array.find(function(currentValue, index, arr),thisValue)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ages = [<span class="number">3</span>, <span class="number">10</span>, <span class="number">18</span>, <span class="number">20</span>];</span><br><span class="line"> ages.find(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item &gt; <span class="number">3</span></span><br><span class="line">    &#125;)</span><br><span class="line">返回值为：<span class="number">10</span></span><br></pre></td></tr></table></figure><h3 id="3-findIndex"><a href="#3-findIndex" class="headerlink" title="3.findIndex()"></a>3.findIndex()</h3><p>findIndex() 返回符合测试条件的第一个数组元素索引，如果没有符合条件的则返回 -1</p><p>语法：array.findIndex(function(currentValue, index, arr), thisValue)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ages = [<span class="number">3</span>, <span class="number">10</span>, <span class="number">18</span>, <span class="number">20</span>];</span><br><span class="line"> ages.findIndex(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item &gt; <span class="number">3</span></span><br><span class="line">    &#125;)</span><br><span class="line">返回值为：<span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="4-forEach-遍历数组"><a href="#4-forEach-遍历数组" class="headerlink" title="4.forEach() 遍历数组"></a>4.forEach() 遍历数组</h3><p>forEach() 方法用于调用数组的每个元素，并将元素传递给回调函数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>];</span><br><span class="line">numbers.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123; </span><br><span class="line">  <span class="keyword">if</span>(item&gt;<span class="number">5</span>)&#123; <span class="built_in">console</span>.log(item) </span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">输出结果为：</span><br><span class="line"><span class="number">9</span>,<span class="number">16</span>,<span class="number">25</span></span><br></pre></td></tr></table></figure><h3 id="5-some"><a href="#5-some" class="headerlink" title="5.some()"></a>5.some()</h3><p>some() 方法用于检测数组中的元素是否满足指定条件（函数提供）</p><p>some() 方法会依次执行数组的每个元素：</p><ul><li>如果有一个元素满足条件，则表达式返回<em>true</em> , 剩余的元素不会再执行检测。</li><li>如果没有满足条件的元素，则返回false。</li></ul><p><strong>注意：</strong> some() 不会对空数组进行检测。</p><p><strong>注意：</strong> some() 不会改变原始数组。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var ages = [3, 10, 18, 20];</span><br><span class="line"></span><br><span class="line">function checkAdult(age) &#123;</span><br><span class="line">    return age &gt;= 18;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function myFunction() &#123;</span><br><span class="line">    document.getElementById("demo").innerHTML = ages.some(checkAdult);</span><br><span class="line">&#125;</span><br><span class="line">输出结果为:</span><br><span class="line"></span><br><span class="line">true</span><br></pre></td></tr></table></figure><h3 id="6-every"><a href="#6-every" class="headerlink" title="6.every()"></a>6.every()</h3><p>every()方法则与some()方法相反，every()方法是检测到有一个元素不满足，则整个表达式返回 <em>false</em> ，且剩余的元素不会再进行检测。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">检测数组 ages 的所有元素是否都大于等于 18 :</span><br><span class="line"></span><br><span class="line">var ages = [32, 33, 16, 40];</span><br><span class="line"></span><br><span class="line">function checkAdult(age) &#123;</span><br><span class="line">    return age &gt;= 18;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function myFunction() &#123;</span><br><span class="line">    document.getElementById("demo").innerHTML = ages.every(checkAdult);</span><br><span class="line">&#125;</span><br><span class="line">输出结果为:</span><br><span class="line"></span><br><span class="line">false</span><br></pre></td></tr></table></figure><h2 id="关于更多的对象属性方法请点击此查看"><a href="#关于更多的对象属性方法请点击此查看" class="headerlink" title="关于更多的对象属性方法请点击此查看"></a><a href="http://www.runoob.com/jsref/jsref-obj-array.html" target="_blank" rel="noopener">关于更多的对象属性方法请点击此查看</a></h2>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;数组常用方法&quot;&gt;&lt;a href=&quot;#数组常用方法&quot; class=&quot;headerlink&quot; title=&quot;数组常用方法&quot;&gt;&lt;/a&gt;数组常用方法&lt;/h3&gt;
    
    </summary>
    
    
      <category term="note" scheme="https://dobinspark.com/tags/note/"/>
    
      <category term="H5" scheme="https://dobinspark.com/tags/H5/"/>
    
      <category term="Array" scheme="https://dobinspark.com/tags/Array/"/>
    
  </entry>
  
</feed>
